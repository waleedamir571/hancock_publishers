RewriteEngine On

# Force HTTPS
RewriteCond %{HTTPS} off
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Redirect www to non-www
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^ https://%1%{REQUEST_URI} [L,R=301]

# Redirect /index.php to /
RewriteCond %{THE_REQUEST} \s/index[.]php[\s?] [NC]
RewriteRule ^index\.php$ / [L,R=301]

# Redirect any .php URL to clean URL (e.g., /about.php to /about)
RewriteCond %{THE_REQUEST} \s([^\s]+)\.php[\s?] [NC]
RewriteRule ^(.*)\.php$ /$1 [L,R=301]

# Handle requests for URLs without .php extension
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php [L]

# ErrorDocument for 404
ErrorDocument 404 https://hancockpublishers.com/404
RewriteCond %{REQUEST_URI} ^/404/$
RewriteRule ^(.*)$ https://hancockpublishers.com/404 [L]

# Add a header to handle bad bots
<IfModule mod_headers.c>
Header set X-Robots-Tag "BadBot: index"
</IfModule>